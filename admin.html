{% extends "base.html" %}

{% block title %}Administration{% endblock %}

{% block content %}
    <section class="admin-section">
        <h2>Panel d'administration</h2>
        
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="menus">Menus</button>
            <button class="tab-btn" data-tab="suggestions">Suggestions</button>
            <button class="tab-btn" data-tab="comments">Commentaires</button>
        </div>
        
        <div id="menus" class="tab-content active">
            <h3>Gestion des menus</h3>
            
            <form method="POST" action="{{ url_for('add_menu') }}" class="menu-form">
                <div class="form-group">
                    <label for="date">Date</label>
                    <input type="date" name="date" id="date" required>
                </div>
                <div class="form-group">
                    <label for="entree">Entrée</label>
                    <input type="text" name="entree" id="entree" required>
                </div>
                <div class="form-group">
                    <label for="plat_principal">Plat principal</label>
                    <input type="text" name="plat_principal" id="plat_principal" required>
                </div>
                <div class="form-group">
                    <label for="dessert">Dessert</label>
                    <input type="text" name="dessert" id="dessert" required>
                </div>
                <button type="submit" class="btn">Ajouter le menu</button>
            </form>
            
            <div class="menus-list">
                {% for menu in menus %}
                    <div class="menu-card">
                        <h4>{{ menu.date.strftime('%A %d %B %Y') }}</h4>
                        <ul>
                            <li><strong>Entrée:</strong> {{ menu.entree }}</li>
                            <li><strong>Plat:</strong> {{ menu.plat_principal }}</li>
                            <li><strong>Dessert:</strong> {{ menu.dessert }}</li>
                        </ul>
                        <a href="{{ url_for('delete_menu', menu_id=menu.id) }}" class="btn btn-danger" onclick="return confirm('Supprimer ce menu?')">Supprimer</a>
                    </div>
                {% else %}
                    <p>Aucun menu à venir.</p>
                {% endfor %}
            </div>
        </div>
        
        <div id="suggestions" class="tab-content">
            <h3>Suggestions des utilisateurs</h3>
            
            <div class="suggestions-list">
                {% for suggestion in suggestions %}
                    <div class="suggestion">
                        <div class="suggestion-header">
                            <strong>{{ suggestion.author.username }}</strong>
                            <span class="date">{{ suggestion.date_posted.strftime('%d/%m/%Y à %H:%M') }}</span>
                        </div>
                        <p>{{ suggestion.content }}</p>
                        <a href="{{ url_for('delete_suggestion', suggestion_id=suggestion.id) }}" class="btn btn-danger" onclick="return confirm('Supprimer cette suggestion?')">Supprimer</a>
                    </div>
                {% else %}
                    <p>Aucune suggestion pour le moment.</p>
                {% endfor %}
            </div>
        </div>
        
        <div id="comments" class="tab-content">
            <h3>Commentaires des utilisateurs</h3>
            
            <div class="comments-list">
                {% for comment in comments %}
                    <div class="comment">
                        <div class="comment-header">
                            <strong>{{ comment.author.username }}</strong>
                            <span class="date">{{ comment.date_posted.strftime('%d/%m/%Y à %H:%M') }}</span>
                            <span class="menu-date">Menu du {{ comment.menu.date.strftime('%d/%m/%Y') }}</span>
                        </div>
                        <p>{{ comment.content }}</p>
                        <a href="{{ url_for('delete_comment', comment_id=comment.id) }}" class="btn btn-danger" onclick="return confirm('Supprimer ce commentaire?')">Supprimer</a>
                    </div>
                {% else %}
                    <p>Aucun commentaire pour le moment.</p>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}